<!DOCTYPE HTML>
<html lang="pt" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Controlando LED RGB através do computador</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../introducao/introducao.html"><strong aria-hidden="true">1.</strong> Introdução</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../introducao/o-que-e-arduino.html"><strong aria-hidden="true">1.1.</strong> O que é o Arduino?</a></li><li class="chapter-item expanded "><a href="../../introducao/por-que-arduino.html"><strong aria-hidden="true">1.2.</strong> Por que Arduino?</a></li><li class="chapter-item expanded "><a href="../../introducao/tipos-de-placas.html"><strong aria-hidden="true">1.3.</strong> Tipos de placas</a></li><li class="chapter-item expanded "><a href="../../introducao/anatomia-do-arduino-uno.html"><strong aria-hidden="true">1.4.</strong> Anatomia do Arduino UNO</a></li><li class="chapter-item expanded "><a href="../../introducao/ide.html"><strong aria-hidden="true">1.5.</strong> IDE</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../introducao/instalacao-ide.html"><strong aria-hidden="true">1.5.1.</strong> Baixando e instalando a IDE</a></li><li class="chapter-item expanded "><a href="../../introducao/arduino-editor.html"><strong aria-hidden="true">1.5.2.</strong> Arduino Editor - IDE online</a></li></ol></li><li class="chapter-item expanded "><a href="../../introducao/tinkercad.html"><strong aria-hidden="true">1.6.</strong> Plataforma Tinkercad</a></li></ol></li><li class="chapter-item expanded "><a href="../../funcoes/funcoes-basicas.html"><strong aria-hidden="true">2.</strong> Funções Básicas</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../funcoes/setup-loop.html"><strong aria-hidden="true">2.1.</strong> setup() e loop()</a></li><li class="chapter-item expanded "><a href="../../funcoes/entrada-saida.html"><strong aria-hidden="true">2.2.</strong> Funções de Entrada e Saída</a></li><li class="chapter-item expanded "><a href="../../funcoes/tempo.html"><strong aria-hidden="true">2.3.</strong> Funções de Tempo</a></li></ol></li><li class="chapter-item expanded "><a href="../../hardware/hardware-basicos.html"><strong aria-hidden="true">3.</strong> Hardware básicos</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../hardware/protoboard.html"><strong aria-hidden="true">3.1.</strong> Protoboard</a></li><li class="chapter-item expanded "><a href="../../hardware/led.html"><strong aria-hidden="true">3.2.</strong> LED</a></li><li class="chapter-item expanded "><a href="../../hardware/resistores.html"><strong aria-hidden="true">3.3.</strong> Resistores</a></li><li class="chapter-item expanded "><a href="../../hardware/botao.html"><strong aria-hidden="true">3.4.</strong> Botão tátil</a></li><li class="chapter-item expanded "><a href="../../hardware/buzzer.html"><strong aria-hidden="true">3.5.</strong> Buzzer</a></li></ol></li><li class="chapter-item expanded "><a href="../../projetos/contador-binario.html"><strong aria-hidden="true">4.</strong> Primeiro projeto - Contador binário</a></li><li class="chapter-item expanded "><a href="../../projetos/pwm.html"><strong aria-hidden="true">5.</strong> PWM - Controlando intensidade do LED</a></li><li class="chapter-item expanded "><a href="../../projetos/serial/monitor.html"><strong aria-hidden="true">6.</strong> Monitor Serial</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../projetos/serial/medindo-luminosidade.html"><strong aria-hidden="true">6.1.</strong> Medindo a luminosidade do ambiente</a></li><li class="chapter-item expanded "><a href="../../projetos/serial/controlando-led.html" class="active"><strong aria-hidden="true">6.2.</strong> Controlando LED RGB através do computador</a></li></ol></li><li class="chapter-item expanded "><a href="../../projetos/medindo-distancia.html"><strong aria-hidden="true">7.</strong> Medindo distâncias com o sensor ultrassônico</a></li><li class="chapter-item expanded "><a href="../../projetos/servo-motor.html"><strong aria-hidden="true">8.</strong> Servo Motor</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#controlando-led-rgb-através-do-computador" id="controlando-led-rgb-através-do-computador">Controlando LED RGB através do computador</a></h1>
<p>Utilizando a porta Serial é possível não apenas receber dados da placa Arduino e trabalhar com eles através do computador, como também enviar dados do computador para a placa. Neste projeto você conseguirá controlar a cor de um LED RGB a partir do seu computador, utilizando a porta Serial. É fortemente recomendado que tenha-se conhecimento em manipulação de strings em C.</p>
<p>Um LED RGB é, na verdade, a junção de 3 leds de cada uma das 3 cores primárias (vermelho (Red), verde (Green) e azul (Blue), formando assim a sigla em inglês RGB). Possui 4 terminais, sendo 3 deles reservados para acionar cada LED e o último (que pode ser diferenciado como o maior de todos os quatro) utilizado como ânodo comum ou cátodo comum, dependendo do tipo do LED; por essa razão ele é chamado apenas de <strong>comum</strong>. Abaixo é possível ver as disposições dos terminais, lembrando que deve-se ter como referência o maior pino (representado pela letra <strong>C</strong>), que é o terminal comum. No lado esquerdo da imagem é representado os terminais da maioria dos LEDs RGB, enquanto que no lado direito tem-se a forma especificada por alguns fabricantes, sendo também a forma utilizada pelo <strong>Tinkercad</strong>.</p>
<p><img src="./../images/rgb-1.png" alt="Tipos de LED RGB" /></p>
<p>A diferença entre leds do tipo anodo comum e cátodo comum se dá na maneira que os LEDs são conectados internamente. No caso do anodo comum ambos, os LEDs compartilham o terminal positivo, enquanto no cátodo comum os LEDs compartilham o terminal negativo. 
Uma das formas de descobrir qual é o tipo de LED, basta utilizar um multímetro  no modo continuidade. Coloque o terminal negativo do multímetro no maior pino do LED (pino comum) e o outro terminal em qualquer um dos 3 pinos de cor. 
Caso o LED acenda, ele é cátodo comum. Se o teste anterior não der resultados, inverta os terminais do multímetro; se o LED  acender, é anodo comum. Caso você não tenha um multímetro, não se preocupe, pois a diferença no código resultante dessa mudança é pouca, ou seja, ao rodar o projeto pela primeira vez, você verá caso tenha escrito ele na forma para cátodo comum enquanto o LED é anodo comum, ou vice-versa. </p>
<p>Agora que você sabe identificar o seu LED, deve estar se perguntando a diferença prática disso. Quando ele é do tipo cátodo comum, o seu terminal comum deve ser conectado ao terminal GND, nesse caso o arduino estará controlando diretamente a voltagem aplicada a ele, ou seja, se a placa estiver enviando 5V (representado pelo valor 255 na função <code>analogWrite()</code> para a cor vermelha, a diferença de potencial será de 5V, fazendo com que o LED acenda com o máximo de brilho vermelho. Já no caso do anodo comum, o terminal comum deve ser conectado em 5V, assim ao enviar o valor 255 com a função <code>analogWrite</code> (5V) o LED simplesmente permanecerá apagado, pois a diferença de potencial será 0V.</p>
<h3><a class="header" href="#hardware" id="hardware">Hardware</a></h3>
<h4><a class="header" href="#materiais-necessários" id="materiais-necessários">Materiais necessários:</a></h4>
<ul>
<li>1x LED RGB</li>
<li>3x resistor 220Ω</li>
</ul>
<h4><a class="header" href="#esquemático" id="esquemático">Esquemático</a></h4>
<p><img src="./../images/rgb-4.png" alt="Esquemático LED RGB" /></p>
<p>Lembre-se que caso o LED utilizado for anodo comum, você deve conectar o terminal comum em 5V.</p>
<h3><a class="header" href="#software" id="software">Software</a></h3>
<p>Como de costume, é necessário declarar os pinos em que o LED estará conectado. Será necessário utilizar os pinos digitais com suporte a PWM (para mais detalhes, cheque o <a href="">projeto PWM - Controlando a intensidade do LED</a>). Também será necessário criar uma variável do tipo <code>String</code> onde o input com a cor desejada será armazenado.</p>
<pre><code class="language-C">const int gLed = 9;
const int bLed = 10;
const int rLed = 11;
String cor;
</code></pre>
<p>Uma das peças centrais do projeto será a função <code>defineCor()</code>. Uma função do tipo <code>void</code> (sem retorno) muito simples, mas que deixará o código mais limpo e legível. Como parâmetros, essa função recebe 3 inteiros, aqui chamados de <code>r</code>, <code>g</code> e <code>b</code> (onde cada uma das variáveis representa umas das 3 cores primárias do LED). Tudo que ela faz é utilizar a função <code>digitalWrite()</code> para enviar os dados específicos de cada cor para o LED. Para fazer com que o LED fique com uma certa coloração, chama-se a função passando como parâmetros o código RGB dessa cor. Por exemplo, a cor vermelha ficaria defineCor(255, 0, 0). Você pode utilizar <a href="https://www.w3schools.com/colors/colors_picker.asp">este site</a> para obter o código RGB de diversas cores.</p>
<pre><code class="language-C">// Função para definir a cor do LED RGB do tipo cátodo COMUM
void defineCor(int r, int g, int b){
  digitalWrite(rLed, r);
  digitalWrite(gLed, g);
  digitalWrite(bLed, b);
}
</code></pre>
<p>Caso o seu LED seja do tipo anodo comum, você precisará fazer uma pequena mudança na função, pois como descrito anteriormente, este LED está recebendo constantemente 5V em todos os terminais de cor. Então, para utilizar o sistema padrão de identificação de cor RGB, é necessário enviar o valor 255 subtraído dos parâmetros da função. </p>
<pre><code class="language-C">// Função para definir a cor do LED RGB do tipo ANODO COMUM
void defineCor(int r, int g, int b){
  digitalWrite(rLed, 255 - r);
  digitalWrite(gLed,255 -  g);
  digitalWrite(bLed, 255 - b);
}
</code></pre>
<p>Na função <code>setup()</code>, é necessário definir os pinos como saída, bem como iniciar o Serial. Também é definido o LED como desligado, utilizando a função <code>defineCor(0, 0, 0)</code> </p>
<pre><code class="language-C">void setup()
{
  pinMode(9, OUTPUT);
  pinMode(10, OUTPUT);
  pinMode(11, OUTPUT);
  Serial.begin(9600);
  
  defineCor(0,0,0);
}
</code></pre>
<p>Na função <code>loop()</code> será necessário ler a entrada do serial. Para isso, será utilizada a função <code>readString()</code> e, em seguida, basta fazer comparações utilizando as estruturas <code>if()</code> e <code>else if()</code> para checar se o input é uma cor programada válida. Note que no código aqui demonstrado existem apenas 3 cores, mas sinta-se à vontade para adicionar mais opções conforme seu desejo e necessidade. O LED pode ser desligado com o comando “apaga”.</p>
<pre><code class="language-C">void loop()
{
  cor = Serial.readString();
  
  if(cor == &quot;vermelha&quot;){
    defineCor(255,0,0);
  }
  else if(cor == &quot;roxa&quot;){
    defineCor(128,0,255);
  }
  else if(cor == &quot;branca&quot;){
    defineCor(255,255,255);
  }
  else if(cor == &quot;apaga&quot;){
    defineCor(0,0,0);
  }
}
</code></pre>
<p>Para acender a cor desejada, basta abrir o Monitor Serial. Nele você verá que existe uma caixa de texto, onde basta digitar o nome da cor e clicar no botão de enviar e, caso o nome tenha sido escrito corretamente (e devidamente codificado no programa), você verá o LED se acendendo na cor desejada. Caso as cores não estejam de acordo com o esperado, certifique-se de que os terminais estão bem conectados na placa ou que o seu tipo de LED (cátodo ou ânodo comum). Nas imagens abaixo, estão destacados a caixa e o botão, tanto na IDE do Arduino quanto no Tinkercad, respectivamente. </p>
<p><img src="./../images/rgb-2.png" alt="Utilização na IDE Arduino" />
<img src="./../images/rgb-3.png" alt="Utilização no Tinkercad" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../../projetos/serial/medindo-luminosidade.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../../projetos/medindo-distancia.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../../projetos/serial/medindo-luminosidade.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../../projetos/medindo-distancia.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
